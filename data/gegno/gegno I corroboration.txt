# Copyright (c) 2023 by Saugia
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>.


mission "Passive-Aggressive Observations"
	invisible
	landing
	destination "Vigales"
	to offer
		random < 40
		has "First Contact: Gegno Scin: offered"
		not "Gegno Genocide Defense: offered"
	on complete
		conversation
			`While navigating the skies of this desert world, you notice familiar readings to the desert world you previously encountered a member of the Gegno Vi on. It's likely this world is also home to the same or similar species of creature you confronted back then. Eventually, you come across a large Gegno Vi vessel stationed on the surface, though unlike in your prior experience, the ship isn't sunken into the desert, likely having recently landed here. A group of Vi warriors are marching out and nearby the vessel, and while they do, your radar picks up two more ships descending from above.`
			choice
				`	(Leave.)`
					goto leave
				`	(Continue to observe.)`
			`	The approaching ships continue their descent, paying you no attention. They appear to be ones that were in orbit when you first entered the system. One of them is the same type of model as the one on the ground, likely some type of transport. The other, however, isn't one you've seen before. It looks like some sort of interceptor vessel, though it is definitely larger than something like a Sparrow from human space, maybe even the size of a Headhunter. Perhaps that ship belongs to someone of importance.`
			`	In any case, considering that the planet is home to more of those monsters from before, and the Vi are here in numbers, it might be best you take your leave now before the situation gets out of control again.`
			choice
				`	(Leave.)`
					goto leave
				`	(Approach the landing zone.)`
			`	Throttling your ship forward, you head towards the Vi's landing zone. While the other transport vessel has touched down already, the interceptor is still in the process of landing, but suddenly whips around to face you as you approach. Unlike the initial reaction of the Scin's warships you confronted a few days ago, the Vi are quick to respond to your presence, and in contrast to a few minutes ago, are clearly acknowledging it. A moment later, you receive what sounds like an angry hail from the interceptor.`
			`	"Tchii ciei escitch tchii iedf teih Voordhte!"`
			choice
				`	(Leave now.)`
				`	(Continue.)`
					goto continue
			`	You decide it's best to not enroach on the Vi's area any more, as there's no telling what they'd do if you continued to do so. Once you back off, the interceptor briefly jerks forward at you in a vexed manner, continuing to observe you until you've left the area. While the Scin seemed more open to interaction, the Vi are clearly adversive to it.`
				decline

			label continue
			action
				"reputation: Gegno Vi" = -1
			action
				set "provoked military"
			`	You decide to continue flying towards the Vi without heeding their warning. With no hesitation, the interceptor begins to charge at you, and the ships on the surface start preparing for takeoff. Even some of the Vi solders on the ground are shouting and gesturing towards your vessel with their weapons. It would seem the Vi are no longer tolerative of your presence.`
				decline

			label leave
			`	You decide to withdraw from the area, and the ships continue on their way towards the surface as if you weren't present. Regardless of whether or not they could have been hostile, getting mixed up with what may be some sort of military exercise could be dangerous, especially with the Vi.`
				decline

	npc save
		on kill
			set "yvx killed"
		government "Gegno Vi"
		personality heroic vindictive staying ramming daring uninterested swarming
		system "Vorsuke"
		ship "Rhyolite" "Imtydei"
	npc save
		government "Gegno Vi"
		personality heroic vindictive staying uninterested swarming
		system "Vorsuke"
		ship "Schist" "Ess Ouec"

mission "Vi Military Group"
	# invisible
	landing
	to offer
		has "Passive-Aggressive Observations: offered"
	to complete
		never
	on enter "Vorsuke"
		fail

	npc
		to spawn
			has "provoked military"
		on kill
			set "yvx killed"
		government "Gegno Vi"
		personality heroic vindictive ramming daring staying launching
		system "Vorsuke"
		ship "Rhyolite" "Imtydei"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying launching
		system "Vorsuke"
		ship "Schist" "Ess Ouec"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying launching
		system "Vorsuke"
		ship "Schist" "Ess Utchec"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying entering
		system "Vorsuke"
		fleet
			names "gegno vi"
			variant
				"Gneiss"
				"Hornfel (Heavy Weapons)" 1
				"Diorite" 1
				"Eclogite" 3


mission "Foreign Spectator I"
	# invisible
	landing
	to offer
		random < 30
		has "First Contact: Gegno Scin: offered"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	on enter "Eogho"
		fail

	npc
		on provoke
			set "interrupted arena"
		government "Gegno Vi"
		personality heroic vindictive ramming staying uninterested entering
		system "Eogho"
		ship "Eclogite" "Tschelgi Dueyu"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Scin"
		personality heroic vindictive staying uninterested entering
		system "Eogho"
		ship "Felsic" "Tschelgi Dueich"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Vi (Neutral)"
		personality heroic vindictive staying uninterested swarming
		system "Eogho"
		fleet
			names "gegno vi"
			variant
				"Hornfel" 2
				"Eclogite"
				"Slate"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Scin (Neutral)"
		personality heroic vindictive staying uninterested swarming
		system "Eogho"
		fleet
			names "gegno scin"
			variant
				"Coesite" 2
				"Tridymite"
				"Mica" 2


mission "Veering Vi"
	repeat
	# invisible
	landing
	deadline 3
	source
		near "Heutesl" 100
	to offer
		random < 60
		has "event: gegno suspicions"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	npc save
		government "Gegno Vi (Neutral)"
		personality entering staying
		system
			government "Gegno Vi"
		fleet
			names "gegno vi"
			variant
				"Eclogite" 2


mission "Scin Suspicion"
	repeat
	# invisible
	landing
	deadline 7
	source
		near "Heutesl" 100
	to offer
		random < 70
		has "event: gegno suspicions"
		not "Scin Suspicion: offered"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	npc save
		government "Gegno Scin (Neutral)"
		personality surveillance entering
		system
			government "Gegno Scin"
		fleet
			names "gegno scin"
			variant
				"Tridymite"


mission "Curious Civilians"
	# invisible
	landing
	to offer
		has "First Contact: Gegno Scin: offered"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	on enter
		system
			government "Gegno"
		fail
		event "gegno suspicions"


mission "Esstch Visit Tracker"
	# invisible
	landing
	repeat 2
	source "Esstch"
	on offer
		fail


mission "Brief Bystander"
	# invisible
	landing
	destination "Esstch"
	to offer
		has "Esstch Visit Tracker: offered" == 2
		has "First Contact: Gegno Scin: offered"
		not "Gegno Genocide Defense: offered"
	on complete
		conversation
			`As usual, the scattered recording instruments on the surface of this planet contradicts what little interest the Gegno appear to be giving it nowadays, despite its location within the Gegno's high-traffic home system of Heutesl. Still, since this planet isn't strictly owned by the Gegno, it makes for a place to stop, and they haven't seemed to either notice or care when you have before.`
			`	However, as you fly around this time, you notice a small Gegno shuttle parked on the ground. The tan coloration of its hull suggest that it's a civilian craft, but what it's doing here is unknown.`
			choice
				`	Investigate.`
					goto investigate
				`	Leave them be.`
					decline

			label investigate
			`	You steer your ship towards the shuttle, and once you approach it, you are able to see a Gegno on the ground nearby fiddling with one of the nearby devices on the surface. Though, as you fly closer, they stop their work and return to their shuttle, taking off shortly after. It seems like they weren't interested in any potential interaction with you.`
			`	The satellite they were tinkering with doesn't strike you as anything special, being just another antique device amongst the others.`
				decline


mission "Recurring Rumors"
	invisible
	landing
	to offer
		has "event: gegno suspicions"
		has "Brief Bystander: declined"
		has "Foreign Spectator I: failed"
		has "Passive-Aggressive Observations: declined"
	on offer
		fail
		event "recurring rumors" 5 7


event "recurring rumors"


mission "Irritable Intervention"
	# invisible
	landing
	source "Giaru Gegno"
	destination "Dueyu Eitch"
	to offer
		has "event: recurring rumors"
		not "Gegno Geoncide Defense: offered"
	on offer
		conversation
			`After you go through your post-docking routine and enter the ringworld, you can't help but feel that something is a bit off. Normally the Quarg here would be swiftly walking about, focused on attending to their duties, but for some reason, there seems to be less of them walking around than usual. Morevover, the ones you do come across are occasionally having discussions with one another, sometimes looking in your direction even for the slightest second. What stands out most is the lack of any Gegno in the area you're in at all.`
			`	A few minutes later, while you are making your way through the pristine interior, you hear a voice call to you from down one of the various branching corridors. Turning around, you recognize the Quarg that has helped you in the past, along with a few others.
			`	"Circumstantial greetings once more, <first> <last>. Might we have a significant moment of your attention?`
			choice
				`	"Sure."`
				`	"How long will it take?"`
					goto "long"

			label long
			`	"As long as is required, for this matter is of symbolic importance," it says, with a slightly elevated tone.`

			`	You follow the group of Quarg to a smaller discussion room, similar to the one you've visited before. Or perhaps you've been visiting a different room each time, considering how unfathomably large a ringworld is. Once you sit down with the Quarg from before, they look at you for a moment, look down at the table, then back up to you.`
			`	"Formerly, I have offered suggestions of heedful interplay regarding the Gegno. However, we are increasingly aware of correlative happenings upon them involving yourself. It would seem consequential events have indeed occured. Not often previously were we approached by Gegno, but a few notable occasions now have meaningful figures sought us out for inquiry as to your necessitations in meddling.`
			choice
				`	"I haven't done any harm to them."`
				`	"It was more coincidential than anything."`
					goto coincidence
				`	"Most of the time they were dismissive."`
					goto dismissive
				`	"They showed some interest in interaction."`
					goto interest

			`	The Quarg ponders for a moment. "One does not need envoke violence to greatly harm another. However purest intentions may be, even the smallest unbeknownst action may rapidly tumble to one not forseenly desired."
				goto cases

			label coincidence
			`	The Quarg ponders for a moment. "Even a mere blandful coincidence can cause the greatest of tragedies. An untroubled stone becomes a deadly meteor if it should fall many enough lengths."
				goto cases

			label dismissive
			`	The Quarg ponders for a moment. "It takes for an occurence to exist in a first place to be dismissive of its happening. Despite this, perhaps the situation is ultimately not happily welcome beforehand."
				goto cases

			label interest
			`	The Quarg ponders for a moment. "Great curiousity does not equal great benefit. Even the most dangerous of creatures may glance but with curiousity at a moment's first."
				goto cases

			label cases
			`	In present cases, we have been reluctantly contacted by numerous members of high Gegno standing. We wish for it to be matter only for further strict cautionaries, but despite this, the Gegno believe it a matter beyond attentiveness. 



			# IN PROGRESS


# mission "Acquiescence"


# jobs (mining)


# mission "Heart of the Mighty"


# mission "Heart of the Clever"


# jobs (cargo)


# mission "Derelict Desponders A"


# mission "Derelict Desponders B"


# Don't forget edits based on rep:
# 	Vi more angry at you if hostile to them during Passive-Aggressive
#	Interruption Consequence for Eogho Duel (set a condition)
#	Fleet size difference for level of hostility for either faction in Aquiescence
# 	Etc..
