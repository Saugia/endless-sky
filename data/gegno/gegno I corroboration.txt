# Copyright (c) 2023 by Saugia
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>.


mission "Passive-Aggressive Observations"
	invisible
	landing
	destination "Vigales"
	to offer
		has "event: introduced scin"
		has "First Contact: Gegno Scin: offered"
		not "Gegno Genocide Defense: offered"
	on complete
		conversation
			`While navigating the skies of this desert world, you notice familiar readings to the desert world you previously encountered a member of the Gegno Vi on. It's likely this world is also home to the same or similar species of creature you confronted back then. Eventually, you come across a large Gegno Vi vessel stationed on the surface, though unlike in your prior experience, the ship isn't sunken into the desert, likely having recently landed here. A group of Vi warriors are marching out and nearby the vessel, and while they do, your radar picks up two more ships descending from above.`
			choice
				`	(Leave.)`
					goto leave
				`	(Continue to observe.)`
			`	The approaching ships continue their descent, paying you no attention. They appear to be ones that were in orbit when you first entered the system. One of them is the same type of model as the one on the ground, likely some type of transport. The other, however, isn't one you've seen before. It looks like some sort of interceptor vessel, though it is definitely larger than something like a Sparrow from human space, maybe even the size of a Headhunter. Perhaps that ship belongs to someone of importance.`
			`	In any case, considering that the planet is home to more of those monsters from before, and the Vi are here in numbers, it might be best you take your leave now before the situation gets out of control again.`
			choice
				`	(Leave.)`
					goto leave
				`	(Approach the landing zone.)`
			`	Throttling your ship forward, you head towards the Vi's landing zone. While the other transport vessel has touched down already, the interceptor is still in the process of landing, but suddenly whips around to face you as you approach. Unlike the initial reaction of the Scin's warships you confronted a few days ago, the Vi are quick to respond to your presence, and in contrast to a few minutes ago, are clearly acknowledging it. A moment later, you receive what sounds like an angry hail from the interceptor.`
			`	"Tchii ciei escitch tchii iedf teih Voordhte!"`
			choice
				`	(Leave now.)`
				`	(Continue.)`
					goto continue
			`	You decide it's best to not enroach on the Vi's area any more, as there's no telling what they'd do if you continued to do so. Once you back off, the interceptor briefly jerks forward at you in a vexed manner, continuing to observe you until you've left the area. While the Scin seemed more open to confrontation, the Vi are clearly adversive to it.`
				decline

			label continue
			action
				"reputation: Gegno Vi" = -1
			action
				set "provoked military"
			`	You decide to continue flying towards the Vi without heeding their warning. With no hesitation, the intercepter begins to charge at you, and the ships on the surface start preparing for takeoff. Even some of the Vi solders on the ground are shouting and jesturing towards your vessel with their weapons. It would seem the Vi are no longer tolerative of your presence.`
				decline

			label leave
			`	You decide to withdraw from the area, and the ships continue on their way towards the surface as if you weren't present. Regardless of whether or not they could have been hostile, getting mixed up with what may be some sort of military exercise could be dangerous, especially with the Vi.`
				decline

	npc save
		on kill
			set "yvx killed"
		government "Gegno Vi"
		personality heroic vindictive staying ramming daring uninterested swarming
		system "Vorsuke"
		ship "Rhyolite" "Imtydei"
	npc save
		government "Gegno Vi"
		personality heroic vindictive staying uninterested swarming
		system "Vorsuke"
		ship "Schist" "Ess Ouec"

mission "Vi Military Group"
	invisible
	landing
	to offer
		has "Passive-Aggressive Observations: offered"
	to complete
		never
	on enter "Vorsuke"
		fail

	npc
		to spawn
			has "provoked military"
		on kill
			set "yvx killed"
		government "Gegno Vi"
		personality heroic vindictive ramming daring staying launching
		system "Vorsuke"
		ship "Rhyolite" "Imtydei"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying launching
		system "Vorsuke"
		ship "Schist" "Ess Ouec"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying launching
		system "Vorsuke"
		ship "Schist" "Ess Utchec"
	npc
		to spawn
			has "provoked military"
		government "Gegno Vi"
		personality heroic vindictive staying entering
		system "Vorsuke"
		fleet
			names "gegno vi"
			variant
				"Gneiss"
				"Hornfel (Heavy Weapons)" 1
				"Diorite" 1
				"Eclogite" 3


mission "Foreign Spectator I"
	#invisible
	landing
	to offer
		has "Passive-Aggressive Observations: offered"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	on enter "Eogho"
		fail
		event "gegno suspicions" 7
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Vi"
		personality heroic vindictive ramming staying uninterested entering
		system "Eogho"
		ship "Eclogite" "Tschelgi Dueyu"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Scin"
		personality heroic vindictive staying uninterested entering
		system "Eogho"
		ship "Felsic" "Tschelgi Dueich"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Vi (Neutral)"
		personality heroic vindictive staying uninterested swarming
		system "Eogho"
		fleet
			names "gegno vi"
			variant
				"Hornfel" 2
				"Eclogite"
				"Slate"
	npc
		on provoke
			set "interrupted arena"
		government "Gegno Scin (Neutral)"
		personality heroic vindictive staying uninterested swarming
		system "Eogho"
		fleet
			names "gegno scin"
			variant
				"Coesite" 2
				"Tridymite"
				"Mica" 2


mission "Veering Vi"
	minor
	repeat
	#invisible
	landing
	deadline 12
	source
		near "Heutesl" 100
	to offer
		has "event: gegno suspicions"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	npc save
		government "Gegno Vi (Neutral)"
		personality entering staying
		system
			government "Gegno Vi"
		fleet
			names "gegno vi"
			variant
				"Eclogite" 3


mission "Scin Suspicion"
	minor
	repeat
	#invisible
	landing
	deadline 9
	source
		near "Heutesl" 100
	to offer
		has "event: gegno suspicions"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	npc save
		government "Gegno Scin (Neutral)"
		personality surveillance entering
		system
			government "Gegno Scin"
		fleet
			names "gegno scin"
			variant
				"Tridymite"

mission "Curious Civilians"
	#invisible
	landing
	to offer
		has "event: gegno suspicions"
		not "Gegno Genocide Defense: offered"
	to complete
		never
	on enter
		system
			government "Gegno"
		fail


mission "Derelict Desponders A"
	#invisible
	landing
	deadline 7
	to offer
		has "Curious Civilians: failed"
		not "Gegno Genocide Defense: offered"
	to complete
		never

	npc
		on assist
			conversation
				`You found this derelict ship. Do you want to help them?`
				choice
					`	(Help.)`
					`	(Leave.)`
						goto leave
					`	I have helped them.`
						decline
				label leave
				`	I want to leave them.`
					defer
		on kill
			set "tviemye killed"
		government "Gegno"
		personality derelict
		system "Vilacira"
		ship "Dolomite" "Tviemye"


mission "Derelict Desponders B"
	#invisible
	landing
	to offer
		has "Derelict Desponders A"
		not "Gegno Genocide Defense: offered"
	npc
		on assist
			conversation
				`You found this derelict ship. Do you want to help them?`
				choice
					`	(Help.)`
					`	(Leave.)`
						goto leave
					`	I have helped them.`
						decline
				label leave
				`	I want to leave them.`
					defer
		government "Gegno"
		personality derelict
		system "Anbrim"
		ship "Gypsum"


# mission "Acquiescence"


# jobs


# mission "Heart of the Mighty"


# mission "Heart of the Clever"
